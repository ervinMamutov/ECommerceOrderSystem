# ==============================================
# E-COMMERCE ORDER SYSTEM - MAIN CONFIGURATION
# ==============================================
# This file contains base configuration shared across all environments.
# Environment-specific settings are in application-{profile}.properties
# Sensitive values MUST be provided via environment variables (.env file)

spring.application.name=E-commerce Order System

# -------------------- Active Profile Configuration --------------------
# Set via environment variable: SPRING_PROFILES_ACTIVE=dev|prod|test
# Default to 'dev' if not specified
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# -------------------- Database Configuration --------------------
# SECURITY: All database credentials come from environment variables
# Create a .env file based on .env.example and fill in your values
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:ecommerce_db}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# -------------------- JPA/Hibernate Configuration --------------------
# Schema management: 'validate' for prod (use Flyway), 'update' for dev
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:validate}

# SQL logging (disabled by default, enable in dev profile)
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Enable batch processing for better performance
spring.jpa.properties.hibernate.jdbc.batch_size=10
spring.jpa.properties.hibernate.order_inserts=true

# -------------------- Server Configuration --------------------
server.port=${SERVER_PORT:8080}

# Graceful shutdown
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=20s

# -------------------- Database Migration (Flyway) --------------------
# Enable Flyway for production-grade schema management
spring.flyway.enabled=${FLYWAY_ENABLED:true}
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration

# -------------------- Jackson Configuration --------------------
# JSON serialization settings
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC

# -------------------- Actuator Configuration --------------------
# Health and monitoring endpoints
management.endpoints.web.base-path=/actuator
management.endpoint.health.enabled=true
management.endpoint.info.enabled=true

# -------------------- Logging Configuration --------------------
# Default logging level (override in profile-specific files)
logging.level.root=INFO
logging.level.com.example.e_commerce=${LOG_LEVEL:INFO}

# -------------------- Application Information --------------------
# Displayed in /actuator/info endpoint
info.app.name=${spring.application.name}
info.app.description=E-commerce Order Management System
info.app.version=@project.version@